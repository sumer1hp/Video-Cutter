<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Cutter - –ù–∞—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ –ø–æ –º–µ—Ç–∫–∞–º</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container-fluid">
        <header class="row bg-primary text-white p-3">
            <div class="col">
                <h1 class="h3 mb-0">üé¨ Video Cutter - –ù–∞—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ –ø–æ –º–µ—Ç–∫–∞–º</h1>
                <small class="text-light">–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –Ω–∏–∫–∞–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤!</small>
            </div>
        </header>

        <div class="row mt-4">
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">–í–∏–¥–µ–æ–ø–ª–µ–µ—Ä</h5>
                    </div>
                    <div class="card-body">
                        <div class="video-container mb-3">
                            <video id="videoPlayer" controls class="w-100">
                                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Ç–µ–≥.
                            </video>
                        </div>
                        
                        <div class="controls mb-3">
                            <input type="file" id="videoFile" accept="video/*" class="form-control mb-2">
                            <div class="alert alert-info">
                                <small>üìπ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: MP4, WebM, OGG. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞.</small>
                            </div>
                            <div class="btn-group w-100">
                                <button id="addStartMarker" class="btn btn-success">üé¨ –ù–∞—á–∞–ª–æ</button>
                                <button id="addEndMarker" class="btn btn-danger">‚èπÔ∏è –ö–æ–Ω–µ—Ü</button>
                                <button id="addManualMarker" class="btn btn-warning">‚è±Ô∏è –†—É—á–Ω–æ–µ</button>
                            </div>
                        </div>

                        <div class="progress-container mb-3">
                            <div class="progress" style="height: 30px;">
                                <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div id="markersContainer" class="markers-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∞–º–∏</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:</label>
                            <div id="currentTime" class="form-control bg-light">00:00:00</div>
                        </div>

                        <div class="manual-marker-form mb-3">
                            <h6>‚è±Ô∏è –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏</h6>
                            <div class="mb-2">
                                <label class="form-label">–í—Ä–µ–º—è (—Å–µ–∫—É–Ω–¥—ã):</label>
                                <input type="number" id="manualTime" class="form-control" step="0.1" min="0" placeholder="0.0">
                            </div>
                            <div class="mb-2">
                                <label class="form-label">–¢–∏–ø –º–µ—Ç–∫–∏:</label>
                                <select id="manualType" class="form-select">
                                    <option value="start">–ù–∞—á–∞–ª–æ</option>
                                    <option value="end">–ö–æ–Ω–µ—Ü</option>
                                </select>
                            </div>
                            <button id="saveManualMarker" class="btn btn-primary w-100">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∫—É</button>
                        </div>

                        <div class="action-buttons">
                            <button id="cutVideo" class="btn btn-success w-100 mb-2">‚úÇÔ∏è –ù–∞—Ä–µ–∑–∞—Ç—å –≤–∏–¥–µ–æ</button>
                            <button id="clearAll" class="btn btn-danger w-100 mb-2">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                            <button id="exportMarkers" class="btn btn-info w-100">üì§ –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç–æ–∫</button>
                            <button id="importMarkers" class="btn btn-secondary w-100 mt-2">üì• –ò–º–ø–æ—Ä—Ç –º–µ—Ç–æ–∫</button>
                        </div>
                    </div>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ –º–µ—Ç–æ–∫ -->
                <div class="card mt-3">
                    <div class="card-header">
                        <h5 class="card-title mb-0">üìã –°–ø–∏—Å–æ–∫ –º–µ—Ç–æ–∫</h5>
                    </div>
                    <div class="card-body">
                        <div id="markersList" class="markers-list">
                            <p class="text-muted">–ú–µ—Ç–∫–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
        <div class="modal fade" id="manualMarkerModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">‚è±Ô∏è –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">–í—Ä–µ–º—è (—Ñ–æ—Ä–º–∞—Ç: –ß–ß:–ú–ú:–°–°):</label>
                            <input type="text" id="manualTimeInput" class="form-control" placeholder="00:00:00">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–¢–∏–ø –º–µ—Ç–∫–∏:</label>
                            <select id="markerTypeSelect" class="form-select">
                                <option value="start">–ù–∞—á–∞–ª–æ –æ—Ç—Ä–µ–∑–∫–∞</option>
                                <option value="end">–ö–æ–Ω–µ—Ü –æ—Ç—Ä–µ–∑–∫–∞</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                        <button type="button" class="btn btn-primary" id="confirmManualMarker">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="modal fade" id="loadingModal" tabindex="-1" data-bs-backdrop="static">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-body text-center">
                        <div class="spinner-border text-primary mb-3" role="status">
                            <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                        <p id="loadingMessage">–û–±—Ä–∞–±–æ—Ç–∫–∞...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div class="modal fade" id="resultsModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞—Ä–µ–∑–∫–∏</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div id="resultsContent"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                        <button type="button" class="btn btn-primary" id="downloadAllSegments">üì• –°–∫–∞—á–∞—Ç—å –≤—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- FFmpeg.wasm –¥–ª—è –Ω–∞—Ä–µ–∑–∫–∏ –≤–∏–¥–µ–æ -->
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.4/dist/ffmpeg.min.js"></script>
    
    <!-- –ù–∞—à–∏ –º–æ–¥—É–ª–∏ -->
    <script src="js/storageManager.js"></script>
    <script src="js/videoManager.js"></script>
    <script src="js/markersManager.js"></script>
    <script src="js/segmentsManager.js"></script>
    <script src="js/exportManager.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
